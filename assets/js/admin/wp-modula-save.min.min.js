wp.Modula=void 0===wp.Modula?{}:wp.Modula,function(a,e){var t={updateInterval:!1,checkSave:function(){var e=this;a("#publishing-action .spinner").addClass("is-active"),a("#publishing-action #publish").attr("disabled","disabled"),e.updateInterval?(clearInterval(e.updateInterval),e.updateInterval=setInterval(a.proxy(e.saveImages,e),1e3)):e.updateInterval=setInterval(a.proxy(e.saveImages,e),1e3)},saveImages:function(e=!1){var t,i=[];clearInterval(this.updateInterval),wp.Modula.Items.each((function(a){var e=a.getAttributes();i[e.index]=e})),(t={_wpnonce:modulaHelper._wpnonce,action:"modula_save_images",gallery:modulaHelper.id}).images=JSON.stringify(i),a.ajax({method:"POST",url:modulaHelper.ajax_url,data:t,dataType:"json"}).done((function(t){a("#publishing-action .spinner").removeClass("is-active"),a("#publishing-action #publish").removeAttr("disabled"),"function"==typeof e&&e()}))},saveImage:function(e,t=!1){var i=wp.Modula.Items.get(e).getAttributes();a("#publishing-action .spinner").addClass("is-active"),a("#publishing-action #publish").attr("disabled","disabled"),ajaxData={_wpnonce:modulaHelper._wpnonce,action:"modula_save_image",gallery:modulaHelper.id},ajaxData.image=JSON.stringify(i),a.ajax({method:"POST",url:modulaHelper.ajax_url,data:ajaxData,dataType:"json"}).done((function(e){a("#publishing-action .spinner").removeClass("is-active"),a("#publishing-action #publish").removeAttr("disabled"),"function"==typeof t&&t()}))}};wp.Modula.Save=t}(jQuery);