!function(t){"function"==typeof define&&define.amd?define([],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t()}(function(){var o=Object.assign||window.jQuery&&jQuery.extend,f=8,a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(function(){t()},25)},n={textarea:!0,input:!0,select:!0,button:!0},s={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},d={move:"touchmove",cancel:"touchend",end:"touchend"},h=/\s+/,r={bubbles:!0,cancelable:!0},e=Symbol("events");function l(t){return t[e]||(t[e]={})}function c(t,e,i,n,o){e=e.split(h);var a,r=l(t),s=e.length;function d(t){i(t,n)}for(;s--;)(r[a=e[s]]||(r[a]=[])).push([i,d]),t.addEventListener(a,d)}function u(t,e,i,n){e=e.split(h);var o,a,r,s=l(t),d=e.length;if(s)for(;d--;)if(a=s[o=e[d]])for(r=a.length;r--;)a[r][0]===i&&(t.removeEventListener(o,a[r][1]),a.splice(r,1))}function p(t,e,i){var n=new CustomEvent(e,r);i&&o(n,i),t.dispatchEvent(n)}function i(t){var i=t,n=!1,o=!1;function e(t){n?(i(),a(e),n=!(o=!0)):o=!1}this.kick=function(t){n=!0,o||e()},this.end=function(t){var e=i;t&&(o?(i=n?function(){e(),t()}:t,n=!0):t())}}function v(){}function g(t){t.preventDefault()}function m(t,e){var i,n;if(t.identifiedTouch)return t.identifiedTouch(e);for(i=-1,n=t.length;++i<n;)if(t[i].identifier===e)return t[i]}function b(t,e){var i=m(t.changedTouches,e.identifier);if(i&&(i.pageX!==e.pageX||i.pageY!==e.pageY))return i}function y(t,e){$(t,e,t,w)}function x(t,e){w()}function w(){u(document,s.move,y),u(document,s.cancel,x)}function I(t){u(document,d.move,t.touchmove),u(document,d.cancel,t.touchend)}function $(t,e,i,n){var o,a,r,s,d,h,l,c,u,g=i.pageX-e.pageX,m=i.pageY-e.pageY;g*g+m*m<f*f||(a=e,r=i,s=g,d=m,h=n,l=(o=t).targetTouches,c=o.timeStamp-a.timeStamp,u={altKey:o.altKey,ctrlKey:o.ctrlKey,shiftKey:o.shiftKey,startX:a.pageX,startY:a.pageY,distX:s,distY:d,deltaX:s,deltaY:d,pageX:r.pageX,pageY:r.pageY,velocityX:s/c,velocityY:d/c,identifier:a.identifier,targetTouches:l,finger:l?l.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=v,o.preventDefault()}},p(a.target,"movestart",u),h(a))}function X(t,e){var i=e.timer;e.touch=t,e.timeStamp=t.timeStamp,i.kick()}function Y(t,e){var i=e.target,n=e.event,o=e.timer;u(document,s.move,X),u(document,s.end,Y),T(i,n,o,function(){setTimeout(function(){u(i,"click",g)},0)})}function A(t,e){var i,n=e.target,o=e.event,a=e.timer;m(t.changedTouches,o.identifier)&&(i=e,u(document,d.move,i.activeTouchmove),u(document,d.end,i.activeTouchend),T(n,o,a))}function T(t,e,i,n){i.end(function(){return p(t,"moveend",e),n&&n()})}if(c(document,"mousedown",function(t){var e;1!==(e=t).which||e.ctrlKey||e.altKey||n[t.target.tagName.toLowerCase()]||(c(document,s.move,y,t),c(document,s.cancel,x,t))}),c(document,"touchstart",function(t){if(!n[t.target.tagName.toLowerCase()]){var e=t.changedTouches[0],i={target:e.target,pageX:e.pageX,pageY:e.pageY,identifier:e.identifier,touchmove:function(t,e){var i,n,o;(o=b(i=t,n=e))&&$(i,n,o,I)},touchend:function(t,e){var i;i=e,m(t.changedTouches,i.identifier)&&I(i)}};c(document,d.move,i.touchmove,i),c(document,d.cancel,i.touchend,i)}}),c(document,"movestart",function(t){if(!t.defaultPrevented&&t.moveEnabled){var a={startX:t.startX,startY:t.startY,pageX:t.pageX,pageY:t.pageY,distX:t.distX,distY:t.distY,deltaX:t.deltaX,deltaY:t.deltaY,velocityX:t.velocityX,velocityY:t.velocityY,identifier:t.identifier,targetTouches:t.targetTouches,finger:t.finger},r={target:t.target,event:a,timer:new i(function(t){var e,i,n,o;e=a,i=r.touch,n=r.timeStamp,o=n-e.timeStamp,e.distX=i.pageX-e.startX,e.distY=i.pageY-e.startY,e.deltaX=i.pageX-e.pageX,e.deltaY=i.pageY-e.pageY,e.velocityX=.3*e.velocityX+.7*e.deltaX/o,e.velocityY=.3*e.velocityY+.7*e.deltaY/o,e.pageX=i.pageX,e.pageY=i.pageY,p(r.target,"move",a)}),touch:void 0,timeStamp:t.timeStamp};void 0===t.identifier?(c(t.target,"click",g),c(document,s.move,X,r),c(document,s.end,Y,r)):(r.activeTouchmove=function(t,e){var i,n,o,a,r;i=t,o=(n=e).event,a=n.timer,(r=b(i,o))&&(i.preventDefault(),o.targetTouches=i.targetTouches,n.touch=r,n.timeStamp=i.timeStamp,a.kick())},r.activeTouchend=function(t,e){A(t,e)},c(document,d.move,r.activeTouchmove,r),c(document,d.end,r.activeTouchend,r))}}),window.jQuery){var C="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return c(this,"movestart",t),!1},teardown:function(){return u(this,"movestart",t),!1},add:D},jQuery.event.special.move={setup:function(){return c(this,"movestart",k),!1},teardown:function(){return u(this,"movestart",k),!1},add:D},jQuery.event.special.moveend={setup:function(){return c(this,"movestart",S),!1},teardown:function(){return u(this,"movestart",S),!1},add:D}}function t(t){t.enableMove()}function k(t){t.enableMove()}function S(t){t.enableMove()}function D(t){var n=t.handler;t.handler=function(t){for(var e,i=C.length;i--;)t[e=C[i]]=t.originalEvent[e];n.apply(this,arguments)}}}),function(t){"function"==typeof define&&define.amd?define(["jquery",void 0,"jquery.event.move"],t):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=t:t(jQuery)}(function(n,t){var o=n.event.add,e=n.event.remove,a=function(t,e,i){n.event.trigger(e,i,t)},r={threshold:.4,sensitivity:6};function s(t){var e,i,n;e=t.currentTarget.offsetWidth,i=t.currentTarget.offsetHeight,n={distX:t.distX,distY:t.distY,velocityX:t.velocityX,velocityY:t.velocityY,finger:t.finger},t.distX>t.distY?t.distX>-t.distY?(t.distX/e>r.threshold||1<t.velocityX*t.distX/e*r.sensitivity)&&(n.type="swiperight",a(t.currentTarget,n)):(-t.distY/i>r.threshold||1<t.velocityY*t.distY/e*r.sensitivity)&&(n.type="swipeup",a(t.currentTarget,n)):t.distX>-t.distY?(t.distY/i>r.threshold||1<t.velocityY*t.distY/e*r.sensitivity)&&(n.type="swipedown",a(t.currentTarget,n)):(-t.distX/e>r.threshold||1<t.velocityX*t.distX/e*r.sensitivity)&&(n.type="swipeleft",a(t.currentTarget,n))}function d(t){var e=n.data(t,"event_swipe");return e||(e={count:0},n.data(t,"event_swipe",e)),e}n.event.special.swipe=n.event.special.swipeleft=n.event.special.swiperight=n.event.special.swipeup=n.event.special.swipedown={setup:function(t,e,i){if(!(0<d(this).count++))return o(this,"moveend",s),!0},teardown:function(){if(!(0<--d(this).count))return e(this,"moveend",s),!0},settings:r}}),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.lightbox=e(t.jQuery)}(this,function(c){function t(t){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=c.extend({},this.constructor.defaults),this.option(t)}return t.defaults={albumLabel:"Image %1 of %2",alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,enableSwipeOnTouchDevices:!0,sanitizeTitle:!1},t.prototype.option=function(t){c.extend(this.options,t)},t.prototype.imageCountLabel=function(t,e){return this.options.albumLabel.replace(/%1/g,t).replace(/%2/g,e)},t.prototype.init=function(){var t=this;c(document).ready(function(){t.enable(),t.build()})},t.prototype.enable=function(){var e=this;c("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(t){return e.start(c(t.currentTarget)),!1})},t.prototype.build=function(){if(!(0<c("#lightbox").length)){var e=this;c('<div id="lightboxOverlay" class="lightboxOverlay"></div><div id="lightbox" class="lightbox"><div class="lb-outerContainer"><div class="lb-container"><img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" /><div class="lb-nav"><a class="lb-prev" href="" ></a><a class="lb-next" href="" ></a></div><div class="lb-loader"><a class="lb-cancel"></a></div></div></div><div class="lb-dataContainer"><div class="lb-data"><div class="lb-details"><span class="lb-caption"></span><span class="lb-number"></span></div><div class="lb-closeContainer"><a class="lb-close"></a></div></div></div></div>').appendTo(c("body")),this.$lightbox=c("#lightbox"),this.$overlay=c("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.$image=this.$lightbox.find(".lb-image"),this.$nav=this.$lightbox.find(".lb-nav"),this.containerPadding={top:parseInt(this.$container.css("padding-top"),10),right:parseInt(this.$container.css("padding-right"),10),bottom:parseInt(this.$container.css("padding-bottom"),10),left:parseInt(this.$container.css("padding-left"),10)},this.imageBorderWidth={top:parseInt(this.$image.css("border-top-width"),10),right:parseInt(this.$image.css("border-right-width"),10),bottom:parseInt(this.$image.css("border-bottom-width"),10),left:parseInt(this.$image.css("border-left-width"),10)},this.$overlay.hide().on("click",function(){return e.end(),!1}),this.$lightbox.hide().on("click",function(t){return"lightbox"===c(t.target).attr("id")&&e.end(),!1}),this.$outerContainer.on("click",function(t){return"lightbox"===c(t.target).attr("id")&&e.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return 0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1),!1}),this.$lightbox.find(".lb-image").on("swiperight",function(){c(".lb-image").effect("slide",{direction:"right",mode:"hide"},function(){0===e.currentImageIndex?e.changeImage(e.album.length-1):e.changeImage(e.currentImageIndex-1)})}),this.$lightbox.find(".lb-image").on("swipeleft",function(){c(".lb-image").effect("slide",{direction:"left",mode:"hide"},function(){e.currentImageIndex===e.album.length-1?e.changeImage(0):e.changeImage(e.currentImageIndex+1)})}),this.$nav.on("mousedown",function(t){3===t.which&&(e.$nav.css("pointer-events","none"),e.$lightbox.one("contextmenu",function(){setTimeout(function(){this.$nav.css("pointer-events","auto")}.bind(e),0)}))}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return e.end(),!1})}},t.prototype.start=function(t){var e=this,i=c(window);i.on("resize",c.proxy(this.sizeOverlay,this)),c("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var n=0;function o(t){e.album.push({alt:t.attr("data-alt"),link:t.attr("href"),title:t.attr("data-title")||t.attr("title")})}var a,r=t.attr("data-lightbox");if(r){a=c(t.prop("tagName")+'[data-lightbox="'+r+'"]');for(var s=0;s<a.length;s=++s)o(c(a[s])),a[s]===t[0]&&(n=s)}else if("lightbox"===t.attr("rel"))o(t);else{a=c(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var d=0;d<a.length;d=++d)o(c(a[d])),a[d]===t[0]&&(n=d)}var h=i.scrollTop()+this.options.positionFromTop,l=i.scrollLeft();this.$lightbox.css({top:h+"px",left:l+"px"}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&&c("html").addClass("lb-disable-scrolling"),this.changeImage(n)},t.prototype.changeImage=function(r){var s=this;this.disableKeyboardNav();var d=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),c(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");var h=new Image;h.onload=function(){var t,e,i,n,o,a;d.attr({alt:s.album[r].alt,src:s.album[r].link}),c(h),d.width(h.width),d.height(h.height),s.options.fitImagesInViewport&&(a=c(window).width(),o=c(window).height(),n=a-s.containerPadding.left-s.containerPadding.right-s.imageBorderWidth.left-s.imageBorderWidth.right-20,i=o-s.containerPadding.top-s.containerPadding.bottom-s.imageBorderWidth.top-s.imageBorderWidth.bottom-120,s.options.maxWidth&&s.options.maxWidth<n&&(n=s.options.maxWidth),s.options.maxHeight&&s.options.maxHeight<n&&(i=s.options.maxHeight),(h.width>n||h.height>i)&&(h.width/n>h.height/i?(e=n,t=parseInt(h.height/(h.width/e),10)):(t=i,e=parseInt(h.width/(h.height/t),10)),d.width(e),d.height(t))),s.sizeContainer(d.width(),d.height())},h.src=this.album[r].link,this.currentImageIndex=r},t.prototype.sizeOverlay=function(){this.$overlay.width(c(document).width()).height(c(document).height())},t.prototype.sizeContainer=function(t,e){var i=this,n=this.$outerContainer.outerWidth(),o=this.$outerContainer.outerHeight(),a=t+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,r=e+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;function s(){i.$lightbox.find(".lb-dataContainer").width(a),i.$lightbox.find(".lb-prevLink").height(r),i.$lightbox.find(".lb-nextLink").height(r),i.showImage()}n!==a||o!==r?this.$outerContainer.animate({width:a,height:r},this.options.resizeDuration,"swing",function(){s()}):s()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").stop(!0).hide(),this.$lightbox.find(".lb-image").fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var t=!1;try{document.createEvent("TouchEvent"),t=!!this.options.alwaysShowNavOnTouchDevices,enableSwipe=!!this.options.enableSwipeOnTouchDevices}catch(t){}enableSwipe&&(this.$lightbox.find(".lb-nav").show(),1<this.album.length&&(this.options.wrapAround?(t&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(0<this.currentImageIndex&&(this.$lightbox.find(".lb-prev").show(),t&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),t&&this.$lightbox.find(".lb-next").css("opacity","1")))))},t.prototype.updateDetails=function(){var t=this;if(void 0!==this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title){var e=this.$lightbox.find(".lb-caption");this.options.sanitizeTitle?e.text(this.album[this.currentImageIndex].title):e.html(this.album[this.currentImageIndex].title),e.fadeIn("fast").find("a").on("click",function(t){void 0!==c(this).attr("target")?window.open(c(this).attr("href"),c(this).attr("target")):location.href=c(this).attr("href")})}if(1<this.album.length&&this.options.showImageNumberLabel){var i=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(".lb-number").text(i).fadeIn("fast")}else this.$lightbox.find(".lb-number").hide();this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){this.album.length>this.currentImageIndex+1&&((new Image).src=this.album[this.currentImageIndex+1].link);0<this.currentImageIndex&&((new Image).src=this.album[this.currentImageIndex-1].link)},t.prototype.enableKeyboardNav=function(){c(document).on("keyup.keyboard",c.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){c(document).off(".keyboard")},t.prototype.keyboardAction=function(t){var e=t.keyCode,i=String.fromCharCode(e).toLowerCase();27===e||i.match(/x|o|c/)?this.end():"p"===i||37===e?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&1<this.album.length&&this.changeImage(this.album.length-1):"n"!==i&&39!==e||(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&1<this.album.length&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),c(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),c("select, object, embed").css({visibility:"visible"}),this.options.disableScrolling&&c("html").removeClass("lb-disable-scrolling")},new t});