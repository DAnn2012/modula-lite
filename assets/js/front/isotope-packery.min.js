!function(t,e){"function"==typeof define&&define.amd?define("packery/js/rect",e):"object"==typeof module&&module.exports?module.exports=e():(t.Packery=t.Packery||{},t.Packery.Rect=e())}(window,function(){function o(t){for(var e in o.defaults)this[e]=o.defaults[e];for(e in t)this[e]=t[e]}o.defaults={x:0,y:0,width:0,height:0};var t=o.prototype;return t.contains=function(t){var e=t.width||0,i=t.height||0;return this.x<=t.x&&this.y<=t.y&&this.x+this.width>=t.x+e&&this.y+this.height>=t.y+i},t.overlaps=function(t){var e=this.x+this.width,i=this.y+this.height,s=t.x+t.width,r=t.y+t.height;return this.x<s&&e>t.x&&this.y<r&&i>t.y},t.getMaximalFreeRects=function(t){if(!this.overlaps(t))return!1;var e,i=[],s=this.x+this.width,r=this.y+this.height,h=t.x+t.width,n=t.y+t.height;return this.y<t.y&&(e=new o({x:this.x,y:this.y,width:this.width,height:t.y-this.y}),i.push(e)),h<s&&(e=new o({x:h,y:this.y,width:s-h,height:this.height}),i.push(e)),n<r&&(e=new o({x:this.x,y:n,width:this.width,height:r-n}),i.push(e)),this.x<t.x&&(e=new o({x:this.x,y:this.y,width:t.x-this.x,height:this.height}),i.push(e)),i},t.canFit=function(t){return this.width>=t.width&&this.height>=t.height},o}),function(t,e){var i;"function"==typeof define&&define.amd?define("packery/js/packer",["./rect"],e):"object"==typeof module&&module.exports?module.exports=e(require("./rect")):(i=t.Packery=t.Packery||{}).Packer=e(i.Rect)}(window,function(e){function t(t,e,i){this.width=t||0,this.height=e||0,this.sortDirection=i||"downwardLeftToRight",this.reset()}var i=t.prototype;i.reset=function(){this.spaces=[];var t=new e({x:0,y:0,width:this.width,height:this.height});this.spaces.push(t),this.sorter=s[this.sortDirection]||s.downwardLeftToRight},i.pack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.canFit(t)){this.placeInSpace(t,i);break}}},i.columnPack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.x<=t.x&&i.x+i.width>=t.x+t.width&&i.height>=t.height-.01){t.y=i.y,this.placed(t);break}}},i.rowPack=function(t){for(var e=0;e<this.spaces.length;e++){var i=this.spaces[e];if(i.y<=t.y&&i.y+i.height>=t.y+t.height&&i.width>=t.width-.01){t.x=i.x,this.placed(t);break}}},i.placeInSpace=function(t,e){t.x=e.x,t.y=e.y,this.placed(t)},i.placed=function(t){for(var e=[],i=0;i<this.spaces.length;i++){var s=this.spaces[i],r=s.getMaximalFreeRects(t);r?e.push.apply(e,r):e.push(s)}this.spaces=e,this.mergeSortSpaces()},i.mergeSortSpaces=function(){t.mergeRects(this.spaces),this.spaces.sort(this.sorter)},i.addSpace=function(t){this.spaces.push(t),this.mergeSortSpaces()},t.mergeRects=function(t){var e=0,i=t[e];t:for(;i;){for(var s=0,r=t[e+s];r;){if(r==i)s++;else{if(r.contains(i)){t.splice(e,1),i=t[e];continue t}i.contains(r)?t.splice(e+s,1):s++}r=t[e+s]}i=t[++e]}return t};var s={downwardLeftToRight:function(t,e){return t.y-e.y||t.x-e.x},rightwardTopToBottom:function(t,e){return t.x-e.x||t.y-e.y}};return t}),function(t,e){"function"==typeof define&&define.amd?define("packery/js/item",["outlayer/outlayer","./rect"],e):"object"==typeof module&&module.exports?module.exports=e(require("outlayer"),require("./rect")):t.Packery.Item=e(t.Outlayer,t.Packery.Rect)}(window,function(t,e){function i(){t.Item.apply(this,arguments)}var s="string"==typeof document.documentElement.style.transform?"transform":"WebkitTransform",r=i.prototype=Object.create(t.Item.prototype),h=r._create;r._create=function(){h.call(this),this.rect=new e};var n=r.moveTo;return r.moveTo=function(t,e){var i=Math.abs(this.position.x-t),s=Math.abs(this.position.y-e);this.layout.dragItemCount&&!this.isPlacing&&!this.isTransitioning&&i<1&&s<1?this.goTo(t,e):n.apply(this,arguments)},r.enablePlacing=function(){this.removeTransitionStyles(),this.isTransitioning&&s&&(this.element.style[s]="none"),this.isTransitioning=!1,this.getSize(),this.layout._setRectSize(this.element,this.rect),this.isPlacing=!0},r.disablePlacing=function(){this.isPlacing=!1},r.removeElem=function(){this.element.parentNode.removeChild(this.element),this.layout.packer.addSpace(this.rect),this.emitEvent("remove",[this])},r.showDropPlaceholder=function(){var t=this.dropPlaceholder;t||((t=this.dropPlaceholder=document.createElement("div")).className="packery-drop-placeholder",t.style.position="absolute"),t.style.width=this.size.width+"px",t.style.height=this.size.height+"px",this.positionDropPlaceholder(),this.layout.element.appendChild(t)},r.positionDropPlaceholder=function(){this.dropPlaceholder.style[s]="translate("+this.rect.x+"px, "+this.rect.y+"px)"},r.hideDropPlaceholder=function(){this.layout.element.removeChild(this.dropPlaceholder)},i}),function(t,e){"function"==typeof define&&define.amd?define("packery/js/packery",["get-size/get-size","outlayer/outlayer","./rect","./packer","./item"],e):"object"==typeof module&&module.exports?module.exports=e(require("get-size"),require("outlayer"),require("./rect"),require("./packer"),require("./item")):t.Packery=e(t.getSize,t.Outlayer,t.Packery.Rect,t.Packery.Packer,t.Packery.Item)}(window,function(u,t,l,e,i){l.prototype.canFit=function(t){return this.width>=t.width-1&&this.height>=t.height-1};var s=t.create("packery");s.Item=i;var r=s.prototype;function h(t,e){return t.position.y-e.position.y||t.position.x-e.position.x}function n(t,e){return t.position.x-e.position.x||t.position.y-e.position.y}r._create=function(){t.prototype._create.call(this),this.packer=new e,this.shiftPacker=new e,this.isEnabled=!0,this.dragItemCount=0;var i=this;this.handleDraggabilly={dragStart:function(){i.itemDragStart(this.element)},dragMove:function(){i.itemDragMove(this.element,this.position.x,this.position.y)},dragEnd:function(){i.itemDragEnd(this.element)}},this.handleUIDraggable={start:function(t,e){e&&i.itemDragStart(t.currentTarget)},drag:function(t,e){e&&i.itemDragMove(t.currentTarget,e.position.left,e.position.top)},stop:function(t,e){e&&i.itemDragEnd(t.currentTarget)}}},r._resetLayout=function(){var t,e,i;this.getSize(),this._getMeasurements(),i=this._getOption("horizontal")?(t=1/0,e=this.size.innerHeight+this.gutter,"rightwardTopToBottom"):(t=this.size.innerWidth+this.gutter,e=1/0,"downwardLeftToRight"),this.packer.width=this.shiftPacker.width=t,this.packer.height=this.shiftPacker.height=e,this.packer.sortDirection=this.shiftPacker.sortDirection=i,this.packer.reset(),this.maxY=0,this.maxX=0},r._getMeasurements=function(){this._getMeasurement("columnWidth","width"),this._getMeasurement("rowHeight","height"),this._getMeasurement("gutter","width")},r._getItemLayoutPosition=function(t){var e;return this._setRectSize(t.element,t.rect),this.isShifting||0<this.dragItemCount?(e=this._getPackMethod(),this.packer[e](t.rect)):this.packer.pack(t.rect),this._setMaxXY(t.rect),t.rect},r.shiftLayout=function(){this.isShifting=!0,this.layout(),delete this.isShifting},r._getPackMethod=function(){return this._getOption("horizontal")?"rowPack":"columnPack"},r._setMaxXY=function(t){this.maxX=Math.max(t.x+t.width,this.maxX),this.maxY=Math.max(t.y+t.height,this.maxY)},r._setRectSize=function(t,e){var i=u(t),s=i.outerWidth,r=i.outerHeight;(s||r)&&(s=this._applyGridGutter(s,this.columnWidth),r=this._applyGridGutter(r,this.rowHeight)),e.width=Math.min(s,this.packer.width),e.height=Math.min(r,this.packer.height)},r._applyGridGutter=function(t,e){if(!e)return t+this.gutter;var i=t%(e+=this.gutter);return t=Math[i&&i<1?"round":"ceil"](t/e)*e},r._getContainerSize=function(){return this._getOption("horizontal")?{width:this.maxX-this.gutter}:{height:this.maxY-this.gutter}},r._manageStamp=function(t){var e,i,s=this.getItem(t);i=s&&s.isPlacing?s.rect:(e=this._getElementOffset(t),new l({x:this._getOption("originLeft")?e.left:e.right,y:this._getOption("originTop")?e.top:e.bottom})),this._setRectSize(t,i),this.packer.placed(i),this._setMaxXY(i)},r.sortItemsByPosition=function(){var t=this._getOption("horizontal")?n:h;this.items.sort(t)},r.fit=function(t,e,i){var s=this.getItem(t);s&&(this.stamp(s.element),s.enablePlacing(),this.updateShiftTargets(s),e=void 0===e?s.rect.x:e,i=void 0===i?s.rect.y:i,this.shift(s,e,i),this._bindFitEvents(s),s.moveTo(s.rect.x,s.rect.y),this.shiftLayout(),this.unstamp(s.element),this.sortItemsByPosition(),s.disablePlacing())},r._bindFitEvents=function(t){var e=this,i=0;function s(){2==++i&&e.dispatchEvent("fitComplete",null,[t])}t.once("layout",s),this.once("layoutComplete",s)},r.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&(this.options.shiftPercentResize?this.resizeShiftPercentLayout():this.layout())},r.needsResizeLayout=function(){var t=u(this.element),e=this._getOption("horizontal")?"innerHeight":"innerWidth";return t[e]!=this.size[e]},r.resizeShiftPercentLayout=function(){var i,e,s,t=this._getItemsForLayout(this.items),r=this._getOption("horizontal"),h=r?"y":"x",n=r?"height":"width",o=r?"rowHeight":"columnWidth",a=r?"innerHeight":"innerWidth",c=this[o];(c=c&&c+this.gutter)?(this._getMeasurements(),i=this[o]+this.gutter,t.forEach(function(t){var e=Math.round(t.rect[h]/c);t.rect[h]=e*i})):(e=u(this.element)[a]+this.gutter,s=this.packer[n],t.forEach(function(t){t.rect[h]=t.rect[h]/s*e})),this.shiftLayout()},r.itemDragStart=function(t){var e;this.isEnabled&&(this.stamp(t),(e=this.getItem(t))&&(e.enablePlacing(),e.showDropPlaceholder(),this.dragItemCount++,this.updateShiftTargets(e)))},r.updateShiftTargets=function(t){this.shiftPacker.reset(),this._getBoundingRect();var r=this._getOption("originLeft"),h=this._getOption("originTop");this.stamps.forEach(function(t){var e,i,s=this.getItem(t);s&&s.isPlacing||(e=this._getElementOffset(t),i=new l({x:r?e.left:e.right,y:h?e.top:e.bottom}),this._setRectSize(t,i),this.shiftPacker.placed(i))},this);var a=this._getOption("horizontal"),e=a?"rowHeight":"columnWidth",c=a?"height":"width";this.shiftTargetKeys=[],this.shiftTargets=[];var u=this[e];if(u=u&&u+this.gutter)for(var i=Math.ceil(t.rect[c]/u),s=Math.floor((this.shiftPacker[c]+this.gutter)/u),d=(s-i)*u,n=0;n<s;n++)this._addShiftTarget(n*u,0,d);else d=this.shiftPacker[c]+this.gutter-t.rect[c],this._addShiftTarget(0,0,d);var o=this._getItemsForLayout(this.items),g=this._getPackMethod();o.forEach(function(t){var e=t.rect;this._setRectSize(t.element,e),this.shiftPacker[g](e),this._addShiftTarget(e.x,e.y,d);var i=a?e.x+e.width:e.x,s=a?e.y:e.y+e.height;if(this._addShiftTarget(i,s,d),u)for(var r=Math.round(e[c]/u),h=1;h<r;h++){var n=a?i:e.x+u*h,o=a?e.y+u*h:s;this._addShiftTarget(n,o,d)}},this)},r._addShiftTarget=function(t,e,i){var s,r=this._getOption("horizontal")?e:t;0!==r&&i<r||(s=t+","+e,-1!=this.shiftTargetKeys.indexOf(s)||(this.shiftTargetKeys.push(s),this.shiftTargets.push({x:t,y:e})))},r.shift=function(t,e,i){var n,o=1/0,a={x:e,y:i};this.shiftTargets.forEach(function(t){var e,i,s,r,h=(s=(i=a).x-(e=t).x,r=i.y-e.y,Math.sqrt(s*s+r*r));h<o&&(n=t,o=h)}),t.rect.x=n.x,t.rect.y=n.y};r.itemDragMove=function(t,e,i){var s,r,h=this.isEnabled&&this.getItem(t);function n(){s.shift(h,e,i),h.positionDropPlaceholder(),s.layout()}h&&(e-=this.size.paddingLeft,i-=this.size.paddingTop,s=this,r=new Date,this._itemDragTime&&r-this._itemDragTime<120?(clearTimeout(this.dragTimeout),this.dragTimeout=setTimeout(n,120)):(n(),this._itemDragTime=r))},r.itemDragEnd=function(t){var e,i,s=this.isEnabled&&this.getItem(t);function r(){2==++e&&(s.element.classList.remove("is-positioning-post-drag"),s.hideDropPlaceholder(),i.dispatchEvent("dragItemPositioned",null,[s]))}s&&(clearTimeout(this.dragTimeout),s.element.classList.add("is-positioning-post-drag"),e=0,i=this,s.once("layout",r),this.once("layoutComplete",r),s.moveTo(s.rect.x,s.rect.y),this.layout(),this.dragItemCount=Math.max(0,this.dragItemCount-1),this.sortItemsByPosition(),s.disablePlacing(),this.unstamp(s.element))},r.bindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"on")},r.unbindDraggabillyEvents=function(t){this._bindDraggabillyEvents(t,"off")},r._bindDraggabillyEvents=function(t,e){var i=this.handleDraggabilly;t[e]("dragStart",i.dragStart),t[e]("dragMove",i.dragMove),t[e]("dragEnd",i.dragEnd)},r.bindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"on")},r.unbindUIDraggableEvents=function(t){this._bindUIDraggableEvents(t,"off")},r._bindUIDraggableEvents=function(t,e){var i=this.handleUIDraggable;t[e]("dragstart",i.start)[e]("drag",i.drag)[e]("dragstop",i.stop)};var o=r.destroy;return r.destroy=function(){o.apply(this,arguments),this.isEnabled=!1},s.Rect=l,s.Packer=e,s}),function(t,e){"function"==typeof define&&define.amd?define(["isotope-layout/js/layout-mode","packery/js/packery"],e):"object"==typeof module&&module.exports?module.exports=e(require("isotope-layout/js/layout-mode"),require("packery")):e(t.ModulaIsotope.LayoutMode,t.Packery)}(window,function(t,e){var i=t.create("packery"),s=i.prototype,r={_getElementOffset:!0,_getMeasurement:!0};for(var h in e.prototype)r[h]||(s[h]=e.prototype[h]);var n=s._resetLayout;s._resetLayout=function(){this.packer=this.packer||new e.Packer,this.shiftPacker=this.shiftPacker||new e.Packer,n.apply(this,arguments)};var o=s._getItemLayoutPosition;s._getItemLayoutPosition=function(t){return t.rect=t.rect||new e.Rect,o.call(this,t)};var a=s.needsResizeLayout;s.needsResizeLayout=function(){return this._getOption("horizontal")?this.needsVerticalResizeLayout():a.call(this)};var c=s._getOption;return s._getOption=function(t){return"horizontal"==t?void 0!==this.options.isHorizontal?this.options.isHorizontal:this.options.horizontal:c.apply(this.isotope,arguments)},i});
