function tg_getURLParameter(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function modulaInViewport(t){"function"==typeof jQuery&&t instanceof jQuery&&(t=t[0]);var e=t.getBoundingClientRect();return e.top-jQuery(window).height()<=-100&&-400<=e.top-jQuery(window).height()||e.bottom<=jQuery(window).height()}jQuery(document).on("vc-full-width-row-single vc-full-width-row",function(t,e){0<jQuery("body").find(".modula").length&&jQuery(window).trigger("modula-update")}),jQuery(window).on("elementor/frontend/init",function(){window.elementorFrontend&&window.elementorFrontend.hooks.addAction("frontend/element_ready/global",function(t){0<jQuery("body").find(".modula").length&&jQuery(window).trigger("modula-update")})}),function(c,s,a,t){var n="modulaGallery",i={resizer:"/",keepArea:!0,type:"creative-gallery",columns:12,gutter:10,enableTwitter:!1,enableFacebook:!1,enableGplus:!1,enablePinterest:!1,enableLinkedin:!1,lazyLoad:0,initLightbox:!1,lightbox:"fancybox",lightboxOpts:{},inView:!1};function h(t,e){this.element=t,this.$element=c(t),this.$itemsCnt=this.$element.find(".modula-items"),this.$items=this.$itemsCnt.find(".modula-item"),this.options=c.extend({},i,e),this._defaults=i,this._name=n,this.tiles=[],this.$tilesCnt=null,this.completed=!1,this.lastWidth=0,this.resizeTO=0,this.isIsotope=!1,this.init()}h.prototype.init=function(){var n=this;c(a).trigger("modula_api_before_init",[n]),"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),c(s).resize(function(){n.onResize(n)}),c(s).on("modula-update",function(){n.onResize(n)}),c(a).on("lazyloaded",function(t){var e,i,o=c(t.target);"modula"==o.data("source")&&(o.data("size",{width:o.width(),height:o.height()}),(e=o.parents(".modula-item")).addClass("tg-loaded"),i=n.$items.index(e),n.placeImage(i),n.isIsotope&&n.$itemsCnt.isotope("layout"))}),n.options.inView&&jQuery(s).on("DOMContentLoaded load resize scroll",function(){modulaInViewport(n.$element)&&n.$element.addClass("modula-loaded-scale")}),this.setupSocial(),this.options.onComplete&&this.options.onComplete(),"fancybox"!=n.options.lightbox||n.options.initLightbox||this.initLightbox(),c(a).trigger("modula_api_after_init",[n])},h.prototype.initLightbox=function(){var o=this;o.$element.on("click",".modula-item-link",function(t){t.preventDefault();var e=c.map(o.$items,function(t){var e=jQuery(t).find(".modula-item-link"),i=jQuery(t).find(".pic");return{src:e.attr("href"),opts:{caption:e.data("caption"),alt:i.attr("alt")}}}),i=o.$items.index(jQuery(this).parents(".modula-item"));jQuery.modulaFancybox.open(e,o.options.lightboxOpts,i)})},h.prototype.trunc=function(t){return Math.trunc?Math.trunc(t):(t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t)},h.prototype.createCustomGallery=function(){var h,r=this,t=this.$element.width(),l=this,d=this.options.columns,e=a.documentElement.clientWidth;"1"==this.options.enableResponsive&&(e<=568?d=this.options.mobileColumns:e<=768&&(d=this.options.tabletColumns)),h=0<this.options.gutter?(t-this.options.gutter*(d-1))/d:Math.floor(t/d*1e3)/1e3,this.$items.not(".jtg-hidden").each(function(t,e){var i,o,n,s,a={};i=c(e).data("width"),o=c(e).data("height"),12<i&&(i=12),"1"==l.options.enableResponsive&&(n=i,s=o,1==d?o=(i=1)*s/n:((i=Math.round(d*n/12))<1&&(i=1),(o=Math.round(i*s/n))<1&&(o=1))),a.width=h*i+l.options.gutter*(i-1),a.height=Math.round(h)*o+l.options.gutter*(o-1),c(e).data("size",a).addClass("tiled").addClass(a.width>a.height?"tile-h":"tile-v").data("position"),c(e).css(c(e).data("size")),c(e).find(".figc").css({width:c(e).data("size").width,height:c(e).data("size").height}),"1"!=r.options.lazyLoad&&r.loadImage(t)});var i={itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(l.options.gutter)}};this.$itemsCnt.isotope(i),this.isIsotope=!0},h.prototype.createGrid=function(){var o=this;this.$itemsCnt.data("area",this.$itemsCnt.width()*this.options.height),this.lastWidth=this.$itemsCnt.width();for(var t=0;t<this.$items.not(".jtg-hidden").length;t++)this.tiles.push(o.getSlot());if(this.tiles.sort(function(t,e){return t.position-e.position}),this.$items.not(".jtg-hidden").each(function(t,e){var i=o.tiles[t];c(e).data("size",i).addClass("tiled").addClass(i.width>i.height?"tile-h":"tile-v").data("position"),c(e).css({width:i.width,height:i.height}),c(e).find(".figc").css({width:i.width,height:i.height}),"1"!=o.options.lazyLoad&&o.loadImage(t)}),!this.isIsotope){var e={resizesContainer:!1,itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(o.options.gutter)}};this.$itemsCnt.isotope(e),this.isIsotope=!0}},h.prototype.createAutoGrid=function(){this.$itemsCnt.justifiedGallery({rowHeight:this.options.rowHeight,margins:this.options.gutter,lastRow:this.options.lastRow,captions:!1,border:0,imgSelector:".pic",cssAnimation:!1,imagesAnimationDuration:700})},h.prototype.createColumnsGrid=function(){var i=this;this.$itemsCnt.isotope({itemSelector:".modula-item",layoutMode:"packery",packery:{gutter:parseInt(this.options.gutter)}}),this.$items.each(function(t,e){i.loadImage(t)}),this.isIsotope=!0},h.prototype.getSlot=function(){if(0==this.tiles.length)return i={top:0,left:0,width:this.$itemsCnt.width(),height:this.options.height,area:this.$itemsCnt.width()*this.options.height,position:0};for(var t=0,e=0;e<this.tiles.length;e++){(i=this.tiles[e]).area>this.tiles[t].area&&(t=e)}var i={},o=this.tiles[t];if(o.width>o.height){var n=o.width/2*this.options.randomFactor;o.prevWidth=o.width,o.width=Math.floor(o.width/2+n*(Math.random()-.5)),i={top:o.top,left:o.left+o.width+this.options.gutter,width:o.prevWidth-o.width-this.options.gutter,height:o.height}}else{n=o.height/2*this.options.randomFactor;o.prevHeight=o.height,o.height=Math.floor(o.height/2+n*(Math.random()-.5)),i={left:o.left,top:o.top+o.height+this.options.gutter,width:o.width,height:o.prevHeight-o.height-this.options.gutter}}return i.area=i.width*i.height,i.position=1e3*i.top+i.left,o.position=1e3*o.top+o.left,this.tiles[t]=o,this.tiles[t].area=o.width*o.height,i},h.prototype.reset=function(){this.tiles=[],"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type?this.createGrid():"grid"==this.options.type&&("automatic"==this.options.grid_type?this.createAutoGrid():this.createColumnsGrid()),this.lastWidth=this.$itemsCnt.width()},h.prototype.onResize=function(e){e.lastWidth!=e.$itemsCnt.width()&&(clearTimeout(e.resizeTO),e.resizeTO=setTimeout(function(){if(e.options.keepArea){var t=e.$itemsCnt.data("area");e.$itemsCnt.height(t/e.$itemsCnt.width())}e.reset()},100))},h.prototype.loadImage=function(t){var e=this,i=e.$items.eq(t).find(".pic"),o=new Image;o.onerror=function(){console.log("error loading image ["+t+"] : "+this.src),t+1<e.$items.length&&e.loadImage(t+1)},o.onload=function(){i.data("size",{width:this.width,height:this.height}),e.placeImage(t),e.$items.eq(t).addClass("tg-loaded"),t+1<e.$items.length&&e.loadImage(t+1)};var n=i.data("src");o.src=n,i.attr("src",n),e.placeImage(t)},h.prototype.placeImage=function(t){if("grid"!=this.options.type){var e=this.$items.eq(t),i=e.find(".pic"),o=e.data("size"),n=i.data("size");if(void 0!==o&&void 0!==n){var s=o.width/o.height,a=n.width/n.height,h=i.data("valign")?i.data("valign"):"middle",r=i.data("halign")?i.data("halign"):"center",l={top:"auto",bottom:"auto",left:"auto",right:"auto",width:"auto",height:"auto",margin:"0",maxWidth:"999em"};if(a<s)switch(l.width=o.width,l.left=0,h){case"top":l.top=0;break;case"middle":l.top=0-(o.width*(1/a)-o.height)/2;break;case"bottom":l.bottom=0}else switch(l.height=o.height,l.top=0,r){case"left":l.left=0;break;case"center":l.left=0-(o.height*a-o.width)/2;break;case"right":l.right=0}i.css(l),this.$items.eq(t).addClass("tg-loaded")}}},h.prototype.setupSocial=function(){this.options.enableTwitter&&e(this.$items,this),this.options.enableFacebook&&o(this.$items,this),this.options.enablePinterest&&l(this.$items,this),this.options.enableLinkedin&&d(this.$items,this),this.options.enableWhatsapp&&r(this.$items,this)},h.prototype.destroy=function(){this.isPackeryActive&&(this.$itemsCnt.packery("destroy"),this.isPackeryActive=!1)};var e=function(t,i){t.find(".modula-icon-twitter").click(function(t){t.preventDefault();var e=i.options.twitterText||a.title;return!i.options.twitterText&&1=="".length&&0<"".text().length&&(e=c.trim("".text())),s.open("https://twitter.com/intent/tweet?url="+encodeURI(location.href.split("#")[0])+"&text="+encodeURI(e),"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},o=function(t,o){t.find(".modula-icon-facebook").click(function(t){t.preventDefault();var e=c(this).parents(".tile:first").find(".pic");o.options.facebookText||a.title;!o.options.facebookText&&1=="".length&&0<"".text().length&&c.trim("".text());e.attr("src");var i="//www.facebook.com/sharer.php?u="+location.href;return s.open(i,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},r=function(t,e){t.find(".modula-icon-whatsapp").click(function(t){t.preventDefault();e.options.whatsappText||a.title;return!e.options.whatsappText&&1=="".length&&0<"".text().length&&c.trim("".text()),s.open("https://api.whatsapp.com/send?text="+encodeURI(s.location.href.split("#")[0])+"&preview_url=true","ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},l=function(t,n){t.find(".modula-icon-pinterest").click(function(t){t.preventDefault();var e=c(this).parents(".tile:first").find(".pic"),i=n.options.pinterestText||a.title;!n.options.pinterestText&&1=="".length&&0<"".text().length&&(i=c.trim("".text()));var o="http://pinterest.com/pin/create/button/?url="+encodeURI(location.href)+"&description="+encodeURI(i);1==e.length&&(o+="&media="+function(t){var e=a.createElement("img");return e.src=t,t=e.src,e.src=null,t}(e.attr("src")));return s.open(o,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},d=function(t,e){t.find(".modula-icon-linkedin").click(function(t){t.preventDefault();var e="//linkedin.com/shareArticle?mini=true&url="+ +encodeURI(location.href);return s.open(e,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})};c.fn[n]=function(e){var i,o=arguments;return e===t||"object"==typeof e?this.each(function(){c.data(this,"plugin_"+n)||c.data(this,"plugin_"+n,new h(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var t=c.data(this,"plugin_"+n);t instanceof h&&"function"==typeof t[e]&&(i=t[e].apply(t,Array.prototype.slice.call(o,1))),"destroy"===e&&c.data(this,"plugin_"+n,null)}),i!==t?i:this):void 0}}(jQuery,window,document),jQuery(window).load(function(){var t=jQuery(".modula.modula-gallery");jQuery.each(t,function(){var t=jQuery(this).attr("id"),e=jQuery(this).data("config");jQuery("#"+t).modulaGallery(e)})});