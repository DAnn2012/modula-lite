"undefined"!=typeof jQuery&&(jQuery.modulaFancybox={open:function(e,o,t){modulaFancybox.open(e,o,t)}});var modulaFancybox={open:function(e,o,t){return e.forEach((function(o,t){void 0!==o.opts.caption&&(e[t].caption=o.opts.caption),void 0!==o.opts.thumb&&(e[t].thumb=o.opts.thumb)})),o.startIndex=t,void 0!==o.Slideshow&&(o.Slideshow.progressParentEl=function(e){return e.instance.container}),void 0!==o.Toolbar&&void 0!==o.Toolbar.items&&void 0!==o.Toolbar.items.share&&(o.Toolbar.items.share.click=function(){ModulaOpenShare()}),o.on={},o.on["Carousel.ready"]=function(e,o){var t=e.options,n=void 0!==t.Slideshow&&void 0!==t.Slideshow.pauseOnHover&&t.Slideshow.pauseOnHover,a=e.plugins.Slideshow.ref,i=!1;"1"==n&&(document.querySelector(".modula-fancybox-container .fancybox__slide .fancybox__content").addEventListener("mouseover",(function(e){"play"==a.state&&(i=!0,a.stop())})),document.querySelector(".modula-fancybox-container .fancybox__slide .fancybox__content").addEventListener("mouseout",(function(e){"ready"==a.state&&i&&(i=!1,a.start())})))},new ModulaFancybox(e,o)},getInstance:function(){return this}};function escapeHtml(e){var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return String(e).replace(/[&<>"'`=\/]/g,(function(e){return o[e]}))}function ModulaOpenShare(){var e=ModulaFancybox.getInstance(),o=ModulaFancybox.getSlide(),t=void 0!==o.opts.image_src?o.opts.image_src:o.src,n="<div class='modula-fancybox-share'><h1>"+e.options.i18n.SHARE+"</h1><p>",a=JSON.parse(ModulaShareButtons);e.options.modulaShare.forEach((function(i,r){var l=(e.options.lightboxEmailMessage.length?e.options.lightboxEmailMessage:"Here is the link to the image : %%image_link%% and this is the link to the gallery : %%gallery_link%%").replace(/\%%gallery_link%%/g,window.location.href).replace(/\%%image_link%%/g,t),s=void 0!==o.opts.$thumb.find("img").attr("title")?o.opts.$thumb.find("img").attr("title"):"";""===s&&o.caption&&void 0!==o.caption&&(s=o.caption),n+=a[i].template({media:"image"===o.type?encodeURIComponent(t):"",modulaShareUrl:encodeURIComponent(t),descr:encodeURIComponent(s),subject:encodeURIComponent(e.options.lightboxEmailSubject),emailMessage:encodeURIComponent(l)})})),n=(n+="</p><p><input class='modula-fancybox-share__input' type='text' value='"+escapeHtml(t)+"' /></p></div>").template({url_raw:escapeHtml(t)}),new ModulaFancybox([{src:n,type:"html",width:640,height:360}],{mainClass:"modula-fancybox-container"})}String.prototype.template=function(e){return this.replace(/\{([^\}]+)\}/g,(function(o,t){for(var n=e,a=t.split("|")[0].split("."),i=0;i<a.length;i++)if(null==(n="function"==typeof n[a[i]]?n[a[i]]():n[a[i]]))return-1!==t.indexOf("|")?t.split("|")[1]:o;return n}))};