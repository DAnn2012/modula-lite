function tg_getURLParameter(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}jQuery(document).on("vc-full-width-row-single vc-full-width-row",function(t,i){jQuery("body").find(".modula").length>0&&jQuery(window).trigger("modula-update")}),function(t,i,e,n){var o="modulaGallery",s={resizer:"/",margin:10,keepArea:!0,type:"creative-gallery",columns:12,gutter:10,enableTwitter:!1,enableFacebook:!1,enableGplus:!1,enablePinterest:!1,enableLinkedin:!1,lazyLoad:0};function a(i,e){this.element=i,this.$element=t(i),this.$itemsCnt=this.$element.find(".modula-items"),this.$items=this.$itemsCnt.find(".modula-item"),this.options=t.extend({},s,e),this._defaults=s,this._name=o,this.tiles=[],this.$tilesCnt=null,this.completed=!1,this.lastWidth=0,this.resizeTO=0,this.isPackeryActive=!1,this.init()}a.prototype.trunc=function(t){return Math.trunc?Math.trunc(t):(t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t)},a.prototype.createCustomGallery=function(){var i,n=this.$element.width(),o=this,s=this.options.columns,a=e.documentElement.clientWidth;"1"==this.options.enableResponsive&&(a<=568?s=this.options.mobileColumns:a<=768&&(s=this.options.tabletColumns)),i=this.options.gutter>0?(n-this.options.gutter*(s-1))/s:Math.floor(n/s),this.$items.not(".jtg-hidden").each(function(e,n){var a,h,r,l,d={};a=t(n).data("width"),h=t(n).data("height"),a>12&&(a=12),"1"==o.options.enableResponsive&&(r=a,l=h,1==s?h=(a=1)*l/r:((a=Math.round(s*r/12))<1&&(a=1),(h=Math.round(a*l/r))<1&&(h=1))),d.width=i*a+o.options.gutter*(a-1),d.height=Math.round(i)*h+o.options.gutter*(h-1),t(n).data("size",d).addClass("tiled").addClass(d.width>d.height?"tile-h":"tile-v").data("position"),t(n).css(t(n).data("size")),t(n).find(".figc").css({width:t(n).data("size").width,height:t(n).data("size").height})}),this.isPackeryActive&&this.$itemsCnt.packery("destroy"),this.$itemsCnt.packery({itemSelector:".modula-item",gutter:parseInt(o.options.gutter),columnWidth:i,resize:!1}),this.isPackeryActive=!0},a.prototype.createGrid=function(){var i=this;this.options.width&&this.$itemsCnt.width(this.options.width),this.options.height&&this.$itemsCnt.height(this.options.height),this.$itemsCnt.data("area",this.$itemsCnt.width()*this.$itemsCnt.height()),this.lastWidth=this.$itemsCnt.width();for(var e=0;e<this.$items.not(".jtg-hidden").length;e++)this.tiles.push(i.getSlot());this.tiles.sort(function(t,i){return t.position-i.position}),this.$items.not(".jtg-hidden").each(function(e,n){var o=i.tiles[e];t(n).data("size",o).addClass("tiled").addClass(o.width>o.height?"tile-h":"tile-v").data("position")}),this.$items.each(function(i,e){t(e).css(t(e).data("size")),t(e).find(".figc").css({width:t(e).data("size").width,height:t(e).data("size").height})}),this.completed=!0},a.prototype.getSlot=function(){if(0==this.tiles.length)return e={top:0,left:0,width:this.$itemsCnt.width(),height:this.$itemsCnt.height(),area:this.$itemsCnt.width()*this.$itemsCnt.height(),position:0};for(var t=0,i=0;i<this.tiles.length;i++){(e=this.tiles[i]).area>this.tiles[t].area&&(t=i)}var e={},n=this.tiles[t];if(n.width>n.height){var o=n.width/2*this.options.randomFactor;n.prevWidth=n.width,n.width=Math.floor(n.width/2+o*(Math.random()-.5)),e={top:n.top,left:n.left+n.width+this.options.margin,width:n.prevWidth-n.width-this.options.margin,height:n.height}}else{o=n.height/2*this.options.randomFactor;n.prevHeight=n.height,n.height=Math.floor(n.height/2+o*(Math.random()-.5)),e={left:n.left,top:n.top+n.height+this.options.margin,width:n.width,height:n.prevHeight-n.height-this.options.margin}}return e.area=e.width*e.height,e.position=1e3*e.top+e.left,n.position=1e3*n.top+n.left,this.tiles[t]=n,this.tiles[t].area=n.width*n.height,e},a.prototype.reset=function(){var t=this;t.tiles=[],"custom-grid"===t.options.type?(t.createCustomGallery(),t.$itemsCnt.packery()):"creative-gallery"==this.options.type&&t.createGrid(),t.$itemsCnt.find(".pic").each(function(i,e){t.placeImage(i)}),t.lastWidth=t.$itemsCnt.width()},a.prototype.onResize=function(t){t.lastWidth!=t.$itemsCnt.width()&&(clearTimeout(t.resizeTO),t.resizeTO=setTimeout(function(){if(t.options.keepArea){var i=t.$itemsCnt.data("area");t.$itemsCnt.height(i/t.$itemsCnt.width())}t.reset()},100))},a.prototype.placeImage=function(t){var i=this.$items.eq(t),e=i.find(".pic"),n=i.data("size"),o=e.data("size");if(e.parent()!=i&&(n={width:e.parent().width(),height:e.parent().height()}),void 0!==n&&void 0!==o){var s=n.width/n.height,a=o.width/o.height,h=e.data("valign")?e.data("valign"):"middle",r=e.data("halign")?e.data("halign"):"center",l={top:"auto",bottom:"auto",left:"auto",right:"auto",width:"auto",height:"auto",margin:"0",maxWidth:"999em"};if(s>a)switch(l.width=n.width,l.left=0,h){case"top":l.top=0;break;case"middle":l.top=0-(n.width*(1/a)-n.height)/2;break;case"bottom":l.bottom=0}else switch(l.height=n.height,l.top=0,r){case"left":l.left=0;break;case"center":l.left=0-(n.height*a-n.width)/2;break;case"right":l.right=0}e.css(l)}},a.prototype.loadImage=function(t){var i=this,e=i.$items.eq(t).find(".pic"),n=new Image;n.onerror=function(){console.log("error loading image ["+t+"] : "+this.src),t+1<i.$items.length&&i.loadImage(t+1)},n.onload=function(){e.data("size",{width:this.width,height:this.height}),i.placeImage(t),i.$items.eq(t).addClass("tg-loaded"),t+1<i.$items.length&&i.loadImage(t+1)};var o=e.data("src");n.src=o,e.attr("src",o)},a.prototype.init=function(){var n=this;t(e).trigger("modula_api_before_init",[n]),this.$itemsCnt.css({position:"relative",zIndex:1,"min-height":"10px"}),this.$items.addClass("tile"),this.$items.find(".pic").removeAttr("src"),"custom-grid"===this.options.type?this.createCustomGallery():"creative-gallery"==this.options.type&&this.createGrid(),"1"!=n.options.lazyLoad&&this.loadImage(0),t(i).resize(function(){n.onResize(n)}),t(i).on("modula-update",function(){n.onResize(n)}),t(e).on("lazyloaded",function(i){var e,o,s=t(i.target);"modula"==s.data("source")&&(s.data("size",{width:s.width(),height:s.height()}),(e=s.parents(".modula-item")).addClass("tg-loaded"),o=n.$items.index(e),n.placeImage(o))}),new ResizeSensor(n.$element,function(){n.onResize(n)}),this.setupSocial(),this.options.onComplete&&this.options.onComplete(),t(e).trigger("modula_api_after_init",[n])},a.prototype.setupSocial=function(){this.options.enableTwitter&&r(this.$items,this),this.options.enableFacebook&&l(this.$items,this),this.options.enablePinterest&&c(this.$items,this),this.options.enableLinkedin&&p(this.$items,this),this.options.enableWhatsapp&&d(this.$items,this)},a.prototype.destroy=function(){this.isPackeryActive&&(this.$itemsCnt.packery("destroy"),this.isPackeryActive=!1)};var r=function(n,o){n.find(".modula-icon-twitter").click(function(n){n.preventDefault();var s=t(this).parents(".tile:first").find(".caption"),a=o.options.twitterText||e.title;return!o.options.twitterText&&1==s.length&&s.text().length>0&&(a=t.trim(s.text())),i.open("https://twitter.com/intent/tweet?url="+encodeURI(location.href.split("#")[0])+"&text="+encodeURI(a),"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},l=function(n,o){n.find(".modula-icon-facebook").click(function(n){n.preventDefault();var s=t(this).parents(".tile:first").find(".pic"),a=t(this).parents(".tile:first").find(".caption");o.options.facebookText||e.title;!o.options.facebookText&&1==a.length&&a.text().length>0&&t.trim(a.text());s.attr("src");var h="//www.facebook.com/sharer.php?u="+location.href;return i.open(h,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},d=function(n,o){n.find(".modula-icon-whatsapp").click(function(n){n.preventDefault();var s=t(this).parents(".tile:first").find(".caption");o.options.whatsappText||e.title;return!o.options.whatsappText&&1==s.length&&s.text().length>0&&t.trim(s.text()),i.open("https://api.whatsapp.com/send?text="+encodeURI(h)+" "+encodeURI(i.location.href.split("#")[0]),"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},c=function(n,o){n.find(".modula-icon-pinterest").click(function(n){n.preventDefault();var s=t(this).parents(".tile:first").find(".pic"),a=t(this).parents(".tile:first").find(".caption"),h=o.options.facebookText||e.title;!o.options.facebookText&&1==a.length&&a.text().length>0&&(h=t.trim(a.text()));var r="http://pinterest.com/pin/create/button/?url="+encodeURI(location.href)+"&description="+encodeURI(h);1==s.length&&(r+="&media="+function(t){var i=e.createElement("img");return i.src=t,t=i.src,i.src=null,t}(s.attr("src")));return i.open(r,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})},p=function(t,e){t.find(".modula-icon-linkedin").click(function(t){t.preventDefault();var e="//linkedin.com/shareArticle?mini=true&url="+ +encodeURI(location.href);return i.open(e,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200),!1})};t.fn[o]=function(i){var e,n=arguments;return void 0===i||"object"==typeof i?this.each(function(){t.data(this,"plugin_"+o)||t.data(this,"plugin_"+o,new a(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?(this.each(function(){var s=t.data(this,"plugin_"+o);s instanceof a&&"function"==typeof s[i]&&(e=s[i].apply(s,Array.prototype.slice.call(n,1))),"destroy"===i&&t.data(this,"plugin_"+o,null)}),void 0!==e?e:this):void 0}}(jQuery,window,document),jQuery(document).ready(function(t){var i=t(".modula-gallery");t.each(i,function(){var i=t(this).attr("id"),e=t(this).data("config");t("#"+i).modulaGallery(e)})}),jQuery(".modula-item").on("click",function(t){function i(){this.event.preventDefault(),jQuery(".lb-close").click(),this.window.location.hash=""}window.location.hash="#",window.addEventListener("popstate",i,!1),window.addEventListener("backbutton",i,!1)});