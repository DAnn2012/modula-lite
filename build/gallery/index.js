(()=>{"use strict";var e,t={219:(e,t,r)=>{const l=window.wp.blocks;var n=r(196);const a=()=>(0,n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"364 242.9 312.2 357"},(0,n.createElement)("g",null,(0,n.createElement)("path",{d:"M528.1,242.9c8.5,16.9,17,33.8,25.6,50.6c13.4,26.4,26.9,52.7,39.9,79.7c-41.8-23.3-83.6-46.7-125.4-70.1 c0.3-1.9,1.7-2.6,2.7-3.5c17.7-17.7,35.4-35.4,53.1-53c1.1-1.1,2.6-2,3.1-3.7C527.4,242.9,527.8,242.9,528.1,242.9z"}),(0,n.createElement)("path",{d:"M602.3,463.3c11.3-6.9,22.6-13.9,33.9-20.8c5.5-3.4,11.1-6.7,16.5-10.3c2.2-1.4,2.9-1.1,3.5,1.5 c6.4,25.3,13,50.6,19.6,75.8c0.6,2.2,1,3.7-2.4,3.5c-46.7-2.1-93.5-4.1-140.2-6.1c-0.2,0-0.3-0.1-0.5-0.2c0.5-1.7,2.1-2,3.3-2.7 c20-12.3,39.9-24.7,60-36.8c3.4-2.1,5.1-3.7,4.8-8.5c-1.4-21.3-1.8-42.6-2.6-63.9c-0.9-24.1-1.8-48.3-2.8-72.4 c-0.2-6.1-0.2-6.1,5.5-4.6c23.8,6.2,47.6,12.5,71.5,18.5c3.9,1,4.2,1.9,2.1,5.4c-23.4,38.5-46.7,77.1-70,115.7 c-1,1.7-2,3.4-3,5.1C601.7,462.8,602,463,602.3,463.3z"}),(0,n.createElement)("path",{d:"M372.8,326.9c48,2.6,95.8,5.1,143.9,7.7c-0.9,2-2.5,2.3-3.7,3.1c-38.6,23.2-77.3,46.4-115.9,69.6c-3,1.8-4.3,2.6-5.4-1.9 c-5.9-24.9-12.2-49.7-18.3-74.6C373.1,329.6,373,328.4,372.8,326.9z"}),(0,n.createElement)("path",{d:"M517.6,599.9c-23.2-43.7-45.9-86.6-69.2-130.5c2.3,1.2,3.5,1.8,4.7,2.4c39.8,21.5,79.5,43.1,119.3,64.5 c3.2,1.7,4.1,2.5,1,5.6c-17.7,17.8-35.2,35.9-52.8,53.9C519.7,596.9,518.9,598.2,517.6,599.9z"}),(0,n.createElement)("path",{d:"M364.9,505.1c26.6-40.5,53.1-80.8,79.7-121.3c1.3,1.3,0.9,2.5,0.9,3.6c0,46-0.1,92-0.1,137.9c0,3.1-0.2,4.5-4,3.3 c-24.9-7.7-49.9-15.2-74.9-22.8C366,505.8,365.7,505.5,364.9,505.1z"}))),o=window.wp.element,i=(e,t)=>{switch(t.type){case"INCREMENT_STEP":return{...e,step:e.step+1};case"DECREMENT_STEP":return{...e,step:e.step>0?e.step-1:0};case"GO_TO_STEP":return{...e,step:t.step};default:return e}},s={step:0},u=window.wp.data,c=window.wp.apiFetch;var d=r.n(c);const g=(0,o.createContext)(),m=({children:e,initialValues:t,attributes:r,setAttributes:l})=>{const a=(()=>{const[e,t]=(0,o.useState)(!1),r=(0,o.useRef)(!1),{isSavingPost:l,isAutosavingPost:n}=(0,u.useSelect)((e=>({isSavingPost:e("core/editor").isSavingPost(),isAutosavingPost:e("core/editor").isAutosavingPost()})));return(0,o.useEffect)((()=>{!l&&!n||r.current||(t(!1),r.current=!0),l||n||!r.current||(t(!0),r.current=!1)}),[l,n]),e})(),c={...s,...t},[m,p]=(0,o.useReducer)(i,c),f=(0,o.useCallback)((()=>{p({type:"INCREMENT_STEP"})}),[]),b=(0,o.useCallback)((()=>{p({type:"DECREMENT_STEP"})}),[]),y=(0,o.useCallback)((e=>{p({type:"GO_TO_STEP",payload:Number(e)})}),[]),h=(0,o.useCallback)((async()=>{try{const e=await d()({path:`/wp/v2/modula-gallery/${r.galleryId}`,method:"POST",data:{modulaSettings:{...r}}});console.log(e)}catch(e){console.log(e)}}),[r]),_=(0,o.useMemo)((()=>({attributes:r,setAttributes:l,incrementStep:f,decrementStep:b,goToStep:y,step:m.step})),[r,l,f,b,y,m.step]);return(0,o.useEffect)((()=>{a&&h()}),[a,h]),(0,n.createElement)(g.Provider,{value:_},e)},p=g,f=window.wp.blockEditor,b=window.wp.components,y=()=>{const e=(0,o.useContext)(p);if(!e)throw new Error("useBlockContext must be used within a BlockContextProvider");return e},h=window.wp.i18n;var _=r(688);const v=()=>{},E=v(),w=Object,S=e=>e===E,C=e=>"function"==typeof e,k=(e,t)=>({...e,...t}),O=new WeakMap;let x=0;const P=e=>{const t=typeof e,r=e&&e.constructor,l=r==Date;let n,a;if(w(e)!==e||l||r==RegExp)n=l?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(n=O.get(e),n)return n;if(n=++x+"~",O.set(e,n),r==Array){for(n="@",a=0;a<e.length;a++)n+=P(e[a])+",";O.set(e,n)}if(r==w){n="#";const t=w.keys(e).sort();for(;!S(a=t.pop());)S(e[a])||(n+=a+":"+P(e[a])+",");O.set(e,n)}}return n},R=new WeakMap,T={},I={},L="undefined",z=typeof window!=L,N=typeof document!=L,B=(e,t)=>{const r=R.get(e);return[()=>!S(t)&&e.get(t)||T,l=>{if(!S(t)){const n=e.get(t);t in I||(I[t]=n),r[5](t,k(n,l),n||T)}},r[6],()=>!S(t)&&t in I?I[t]:!S(t)&&e.get(t)||T]};let F=!0;const[M,V]=z&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[v,v],A={isOnline:()=>F,isVisible:()=>{const e=N&&document.visibilityState;return S(e)||"hidden"!==e}},D={initFocus:e=>(N&&document.addEventListener("visibilitychange",e),M("focus",e),()=>{N&&document.removeEventListener("visibilitychange",e),V("focus",e)}),initReconnect:e=>{const t=()=>{F=!0,e()},r=()=>{F=!1};return M("online",t),M("offline",r),()=>{V("online",t),V("offline",r)}}},j=!n.useId,H=!z||"Deno"in window,$=H?n.useEffect:n.useLayoutEffect,W="undefined"!=typeof navigator&&navigator.connection,G=!H&&W&&(["slow-2g","2g"].includes(W.effectiveType)||W.saveData),U=e=>{if(C(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?P(e):"",t]};let q=0;const J=()=>++q;async function K(...e){const[t,r,l,n]=e,a=k({populateCache:!0,throwOnError:!0},"boolean"==typeof n?{revalidate:n}:n||{});let o=a.populateCache;const i=a.rollbackOnError;let s=a.optimisticData;const u=!1!==a.revalidate,c=a.throwOnError;if(C(r)){const e=r,l=[],n=t.keys();for(const r of n)!/^\$(inf|sub)\$/.test(r)&&e(t.get(r)._k)&&l.push(r);return Promise.all(l.map(d))}return d(r);async function d(r){const[n]=U(r);if(!n)return;const[a,d]=B(t,n),[g,m,p,f]=R.get(t),b=()=>{const e=g[n];return u&&(delete p[n],delete f[n],e&&e[0])?e[0](2).then((()=>a().data)):a().data};if(e.length<3)return b();let y,h=l;const _=J();m[n]=[_,0];const v=!S(s),w=a(),k=w.data,O=w._c,x=S(O)?k:O;if(v&&(s=C(s)?s(x,k):s,d({data:s,_c:x})),C(h))try{h=h(x)}catch(e){y=e}if(h&&(e=>C(e.then))(h)){if(h=await h.catch((e=>{y=e})),_!==m[n][0]){if(y)throw y;return h}y&&v&&(e=>"function"==typeof i?i(e):!1!==i)(y)&&(o=!0,d({data:x,_c:E}))}if(o&&!y)if(C(o)){const e=o(h,x);d({data:e,error:E,_c:E})}else d({data:h,error:E,_c:E});if(m[n][1]=J(),Promise.resolve(b()).then((()=>{d({_c:E})})),!y)return h;if(c)throw y}}const Q=(e,t)=>{for(const r in e)e[r][0]&&e[r][0](t)},X=(e,t)=>{if(!R.has(e)){const r=k(D,t),l={},n=K.bind(E,e);let a=v;const o={},i=(e,t)=>{const r=o[e]||[];return o[e]=r,r.push(t),()=>r.splice(r.indexOf(t),1)},s=(t,r,l)=>{e.set(t,r);const n=o[t];if(n)for(const e of n)e(r,l)},u=()=>{if(!R.has(e)&&(R.set(e,[l,{},{},{},n,s,i]),!H)){const t=r.initFocus(setTimeout.bind(E,Q.bind(E,l,0))),n=r.initReconnect(setTimeout.bind(E,Q.bind(E,l,1)));a=()=>{t&&t(),n&&n(),R.delete(e)}}};return u(),[e,n,u,a]}return[e,R.get(e)[4]]},[Y,Z]=X(new Map),ee=k({onLoadingSlow:v,onSuccess:v,onError:v,onErrorRetry:(e,__,t,r,l)=>{const n=t.errorRetryCount,a=l.retryCount,o=~~((Math.random()+.5)*(1<<(a<8?a:8)))*t.errorRetryInterval;!S(n)&&a>n||setTimeout(r,o,l)},onDiscarded:v,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:G?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:G?5e3:3e3,compare:(e,t)=>P(e)==P(t),isPaused:()=>!1,cache:Y,mutate:Z,fallback:{}},A),te=(e,t)=>{const r=k(e,t);if(t){const{use:l,fallback:n}=e,{use:a,fallback:o}=t;l&&a&&(r.use=l.concat(a)),n&&o&&(r.fallback=k(n,o))}return r},re=(0,n.createContext)({}),le=z&&window.__SWR_DEVTOOLS_USE__,ne=le?window.__SWR_DEVTOOLS_USE__:[],ae=ne.concat((e=>(t,r,l)=>e(t,r&&((...e)=>{const[l]=U(t),[,,,n]=R.get(Y);if(l.startsWith("$inf$"))return r(...e);const a=n[l];return S(a)?r(...e):(delete n[l],a)}),l)));le&&(window.__SWR_DEVTOOLS_REACT__=n);const oe=n.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),ie={dedupe:!0},se=(w.defineProperty((e=>{const{value:t}=e,r=(0,n.useContext)(re),l=C(t),a=(0,n.useMemo)((()=>l?t(r):t),[l,r,t]),o=(0,n.useMemo)((()=>l?a:te(r,a)),[l,r,a]),i=a&&a.provider,s=(0,n.useRef)(E);i&&!s.current&&(s.current=X(i(o.cache||Y),a));const u=s.current;return u&&(o.cache=u[0],o.mutate=u[1]),$((()=>{if(u)return u[2]&&u[2](),u[3]}),[]),(0,n.createElement)(re.Provider,k(e,{value:o}))}),"defaultValue",{value:ee}),ue=(e,t,r)=>{const{cache:l,compare:a,suspense:o,fallbackData:i,revalidateOnMount:s,revalidateIfStale:u,refreshInterval:c,refreshWhenHidden:d,refreshWhenOffline:g,keepPreviousData:m}=r,[p,f,b,y]=R.get(l),[h,v]=U(e),w=(0,n.useRef)(!1),O=(0,n.useRef)(!1),x=(0,n.useRef)(h),P=(0,n.useRef)(t),T=(0,n.useRef)(r),I=()=>T.current,N=()=>I().isVisible()&&I().isOnline(),[F,M,V,A]=B(l,h),D=(0,n.useRef)({}).current,W=S(i)?r.fallback[h]:i,G=(e,t)=>{for(const r in D){const l=r;if("data"===l){if(!a(e[l],t[l])){if(!S(e[l]))return!1;if(!a(le,t[l]))return!1}}else if(t[l]!==e[l])return!1}return!0},q=(0,n.useMemo)((()=>{const e=!!h&&!!t&&(S(s)?!I().isPaused()&&!o&&(!!S(u)||u):s),r=t=>{const r=k(t);return delete r._k,e?{isValidating:!0,isLoading:!0,...r}:r},l=F(),n=A(),a=r(l),i=l===n?a:r(n);let c=a;return[()=>{const e=r(F());return G(e,c)?(c.data=e.data,c.isLoading=e.isLoading,c.isValidating=e.isValidating,c.error=e.error,c):(c=e,e)},()=>i]}),[l,h]),Q=(0,_.useSyncExternalStore)((0,n.useCallback)((e=>V(h,((t,r)=>{G(r,t)||e()}))),[l,h]),q[0],q[1]),X=!w.current,Y=p[h]&&p[h].length>0,Z=Q.data,ee=S(Z)?W:Z,te=Q.error,re=(0,n.useRef)(ee),le=m?S(Z)?re.current:Z:ee,ne=!(Y&&!S(te))&&(X&&!S(s)?s:!I().isPaused()&&(o?!S(ee)&&u:S(ee)||u)),ae=!!(h&&t&&X&&ne),se=S(Q.isValidating)?ae:Q.isValidating,ue=S(Q.isLoading)?ae:Q.isLoading,ce=(0,n.useCallback)((async e=>{const t=P.current;if(!h||!t||O.current||I().isPaused())return!1;let l,n,o=!0;const i=e||{},s=!b[h]||!i.dedupe,u=()=>j?!O.current&&h===x.current&&w.current:h===x.current,c={isValidating:!1,isLoading:!1},d=()=>{M(c)},g=()=>{const e=b[h];e&&e[1]===n&&delete b[h]},m={isValidating:!0};S(F().data)&&(m.isLoading=!0);try{if(s&&(M(m),r.loadingTimeout&&S(F().data)&&setTimeout((()=>{o&&u()&&I().onLoadingSlow(h,r)}),r.loadingTimeout),b[h]=[t(v),J()]),[l,n]=b[h],l=await l,s&&setTimeout(g,r.dedupingInterval),!b[h]||b[h][1]!==n)return s&&u()&&I().onDiscarded(h),!1;c.error=E;const e=f[h];if(!S(e)&&(n<=e[0]||n<=e[1]||0===e[1]))return d(),s&&u()&&I().onDiscarded(h),!1;const i=F().data;c.data=a(i,l)?i:l,s&&u()&&I().onSuccess(l,h,r)}catch(e){g();const t=I(),{shouldRetryOnError:r}=t;t.isPaused()||(c.error=e,s&&u()&&(t.onError(e,h,t),(!0===r||C(r)&&r(e))&&N()&&t.onErrorRetry(e,h,t,(e=>{const t=p[h];t&&t[0]&&t[0](3,e)}),{retryCount:(i.retryCount||0)+1,dedupe:!0})))}return o=!1,d(),!0}),[h,l]),de=(0,n.useCallback)(((...e)=>K(l,x.current,...e)),[]);if($((()=>{P.current=t,T.current=r,S(Z)||(re.current=Z)})),$((()=>{if(!h)return;const e=ce.bind(E,ie);let t=0;const r=((e,t,r)=>{const l=t[e]||(t[e]=[]);return l.push(r),()=>{const e=l.indexOf(r);e>=0&&(l[e]=l[l.length-1],l.pop())}})(h,p,((r,l={})=>{if(0==r){const r=Date.now();I().revalidateOnFocus&&r>t&&N()&&(t=r+I().focusThrottleInterval,e())}else if(1==r)I().revalidateOnReconnect&&N()&&e();else{if(2==r)return ce();if(3==r)return ce(l)}}));return O.current=!1,x.current=h,w.current=!0,M({_k:v}),ne&&(S(ee)||H?e():(l=e,z&&typeof window.requestAnimationFrame!=L?window.requestAnimationFrame(l):setTimeout(l,1))),()=>{O.current=!0,r()};var l}),[h]),$((()=>{let e;function t(){const t=C(c)?c(F().data):c;t&&-1!==e&&(e=setTimeout(r,t))}function r(){F().error||!d&&!I().isVisible()||!g&&!I().isOnline()?t():ce(ie).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[c,d,g,h]),(0,n.useDebugValue)(le),o&&S(ee)&&h){if(!j&&H)throw new Error("Fallback data is required when using suspense in SSR.");P.current=t,T.current=r,O.current=!1;const e=y[h];if(!S(e)){const t=de(e);oe(t)}if(!S(te))throw te;{const e=ce(ie);S(le)||(e.status="fulfilled",e.value=!0),oe(e)}}return{mutate:de,get data(){return D.data=!0,le},get error(){return D.error=!0,te},get isValidating(){return D.isValidating=!0,se},get isLoading(){return D.isLoading=!0,ue}}},function(...e){const t=k(ee,(0,n.useContext)(re)),[r,l,a]=(e=>C(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}])(e),o=te(t,a);let i=ue;const{use:s}=o,u=(s||[]).concat(ae);for(let e=u.length;e--;)i=u[e](i);return i(r,l||o.fetcher||null,o)});var ue;const ce=e=>d()({path:e}),de=()=>{const{attributes:e,setAttributes:t}=y(),{galleryId:r}=e,{data:l,error:a,isLoading:i}=se("/wp/v2/modula-gallery",ce),s=(0,o.useMemo)((()=>i?[{value:0,label:(0,h.__)("Fetching Galleries","modula-best-grid-gallery")}]:a?[{value:0,label:(0,h.__)("Error","modula-best-grid-gallery")}]:l?l.map((e=>({value:e.id,label:e.title.rendered}))):[{value:0,label:(0,h.__)("No galleries found","modula-best-grid-gallery")}]),[l,a,i]);return i?(0,n.createElement)(b.Spinner,null):a?(0,n.createElement)("p",null,(0,h.__)("Error!","modula-best-grid-gallery")):s.length?(0,n.createElement)(b.SelectControl,{label:(0,h.__)("Choose a gallery","modula-best-grid-gallery"),value:r,onChange:e=>{const r=["blockColor","blockBackground","fontSize"],n=l.find((t=>t.id===Number(e)));if(t({galleryId:Number(e)}),!n?.modulaSettings)return;const a=Object.keys(n.modulaSettings).filter((e=>r.includes(e))).reduce(((e,t)=>(e[t]=n.modulaSettings[t],e)),{});t(a)},options:[{value:0,label:(0,h.__)("Select a gallery")},...s]}):(0,n.createElement)("div",null,(0,n.createElement)("p",null,(0,h.__)("No Galleries found :(","modula-best-grid-gallery")),(0,n.createElement)("p",null,(0,n.createElement)(b.Button,{variant:"primary",onClick:void 0,label:(0,h.__)("Click here to create a new gallery","modula-best-grid-gallery")},(0,h.__)("Click here to create a new gallery","modula-best-grid-gallery"))))},ge=()=>{const{attributes:e,setAttributes:t}=y(),{galleryType:r,galleryColumns:l,galleryLightbox:a,rowHeight:o,lastRow:i,titleColor:s,titleFontSize:u,titleVisibility:c,captionColor:d,captionFontSize:g,captionVisibility:m,socialIconsFontSize:p,socialIconsGutter:_,enableFacebook:v,enableTwitter:E,enableWhatsapp:w,enableLinkedIN:S,enablePinterest:C,enableEmail:k,hoverColor:O,hoverOpacity:x}=e;return(0,n.createElement)(f.InspectorControls,{group:"settings"},(0,n.createElement)(b.Panel,null,(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Modula Settings","modula-best-grid-gallery"),initialOpen:!0},(0,n.createElement)(de,null),(0,n.createElement)(b.SelectControl,{label:(0,h.__)("Gallery Type","modula-best-grid-gallery"),value:r||"creative",onChange:e=>t({galleryType:e}),options:[{label:(0,h.__)("Creative","modula-best-grid-gallery"),value:"creative"},{label:(0,h.__)("Masonry","modula-best-grid-gallery"),value:"masonry"},{label:(0,h.__)("Custom grid","modula-best-grid-gallery"),value:"custom-grid"}]}),"masonry"===r&&(0,n.createElement)(n.Fragment,null,(0,n.createElement)(b.SelectControl,{label:(0,h.__)("Columns","modula-best-grid-gallery"),value:l,onChange:e=>t({galleryColumns:Number(e)}),options:[{label:(0,h.__)("One Column","modula-best-grid-gallery"),value:1},{label:(0,h.__)("Two Columns","modula-best-grid-gallery"),value:2},{label:(0,h.__)("Three Columns","modula-best-grid-gallery"),value:3},{label:(0,h.__)("Four Columns","modula-best-grid-gallery"),value:4},{label:(0,h.__)("Five Columns","modula-best-grid-gallery"),value:5},{label:(0,h.__)("Six Columns","modula-best-grid-gallery"),value:6}]}),(0,n.createElement)(b.TextControl,{label:(0,h.__)("Row Height","modula-best-grid-gallery"),type:"number",onChange:e=>t({rowHeight:e}),value:o}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Enable last row","modula-best-grid-gallery"),checked:i,onChange:e=>{t({lastRow:Boolean(e)})}}))),(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Lightbox Settings","modula-best-grid-gallery"),initialOpen:!1},(0,n.createElement)(b.RadioControl,{label:(0,h.__)("Enable Lightbox","modula-best-grid-gallery"),onChange:e=>t({galleryLightbox:Boolean(e)}),selected:a,options:[{label:"Enable",value:"enabled"},{label:"Disable",value:"disabled"}]})),(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Image Title Settings","modula-best-grid-gallery"),initialOpen:!1},(0,n.createElement)(b.__experimentalText,null,(0,h.__)("Pick a color for the gallery title.","modula-best-grid-gallery")),(0,n.createElement)(b.ColorPicker,{color:s,onChange:e=>{t({titleColor:e})},enableAlpha:!0,defaultValue:"#000"}),(0,n.createElement)(b.FontSizePicker,{__nextHasNoMarginBottom:!0,fontSizes:[{name:(0,h.__)("Small","modula-best-grid-gallery"),slug:"small",size:12},{name:(0,h.__)("Medium","modula-best-grid-gallery"),slug:"medium",size:18},{name:(0,h.__)("Big","modula-best-grid-gallery"),slug:"big",size:26}],value:u,withSlider:!0,disabledCustomFontSizes:!1,fallbackFontSize:"16",onChange:e=>t({titleFontSize:Number(e)})}),(0,n.createElement)(b.RadioControl,{label:(0,h.__)("Show/Hide title","modula-best-grid-gallery"),selected:c,onChange:e=>t({titleVisibility:String(e)}),options:[{label:(0,h.__)("Visible","modula-best-grid-gallery"),value:"visible"},{label:(0,h.__)("Hidden","modula-best-grid-gallery"),value:"hidden"}]}))),(0,n.createElement)(b.Panel,null,(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Image Caption Settings","modula-best-grid-gallery"),initialOpen:!1},(0,n.createElement)(b.__experimentalText,null,(0,h.__)("Pick a color for the gallery caption.","modula-best-grid-gallery")),(0,n.createElement)(b.ColorPicker,{color:d,onChange:e=>{t({captionColor:e})},enableAlpha:!0,defaultValue:"#000"}),(0,n.createElement)(b.FontSizePicker,{__nextHasNoMarginBottom:!0,fontSizes:[{name:(0,h.__)("Small","modula-best-grid-gallery"),slug:"small",size:12},{name:(0,h.__)("Medium","modula-best-grid-gallery"),slug:"medium",size:18},{name:(0,h.__)("Big","modula-best-grid-gallery"),slug:"big",size:26}],value:g,withSlider:!0,disabledCustomFontSizes:!1,fallbackFontSize:"16",onChange:e=>t({captionFontSize:Number(e)})}),(0,n.createElement)(b.RadioControl,{label:(0,h.__)("Show/Hide Caption","modula-best-grid-gallery"),selected:m,onChange:e=>t({captionVisibility:String(e)}),options:[{label:(0,h.__)("Visible","modula-best-grid-gallery"),value:"visible"},{label:(0,h.__)("Hidden","modula-best-grid-gallery"),value:"hidden"}]})),(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Socials","modula-best-grid-gallery"),initialOpen:!1},(0,n.createElement)(b.FontSizePicker,{fontSizes:[{name:(0,h.__)("Small","modula-best-grid-gallery"),size:12,slug:"small"},{name:(0,h.__)("Normal","modula-best-grid-gallery"),size:16,slug:"normal"},{name:(0,h.__)("Big","modula-best-grid-gallery"),size:26,slug:"big"}],onChange:e=>t({socialIconsFontSize:Number(e)}),withReset:!1,units:["px","em","rem"],value:p}),(0,n.createElement)(b.RangeControl,{label:(0,h.__)("Gutter","modula-best-grid-gallery"),value:_,allowReset:!1,onChange:e=>t({socialIconsGutter:Number(e)}),min:0,initialPosition:10,max:20}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Facebook","modula-best-grid-gallery"),checked:v,onChange:e=>{t({enableFacebook:Boolean(e)})}}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Twitter","modula-best-grid-gallery"),checked:E,onChange:e=>{t({enableTwitter:Boolean(e)})}}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Whatsapp","modula-best-grid-gallery"),checked:w,onChange:e=>{t({enableWhatsapp:Boolean(e)})}}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("LinkedIN","modula-best-grid-gallery"),checked:S,onChange:e=>{t({enableLinkedIN:Boolean(e)})}}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Pinterest","modula-best-grid-gallery"),checked:C,onChange:e=>{t({enablePinterest:Boolean(e)})}}),(0,n.createElement)(b.CheckboxControl,{label:(0,h.__)("Email","modula-best-grid-gallery"),checked:k,onChange:e=>{t({enableEmail:Boolean(e)})}})),(0,n.createElement)(b.PanelBody,{title:(0,h.__)("Hover Effects","modula-best-grid-gallery"),initialOpen:!1},(0,n.createElement)(b.ColorPicker,{color:O,onChange:e=>{t({hoverColor:e})},enableAlpha:!0,defaultValue:"#FFF"}),(0,n.createElement)(b.RangeControl,{label:(0,h.__)("Hover Effect Opacity","modula-best-grid-gallery"),value:x,allowReset:!1,onChange:e=>t({hoverOpacity:Number(e)}),min:0,initialPosition:100,max:100}))))},me=()=>{const{createPost:e,loading:t,data:r}=((e="modula-gallery")=>{const[t,r]=(0,o.useState)(!1),[l,n]=(0,o.useState)(null),[a,i]=(0,o.useState)(null);return{loading:t,error:l,data:a,createPost:async(t={})=>{const l={title:(0,h.__)("New Gallery","modula-best-grid-gallery"),content:"",status:"publish",...t};r(!0);try{const t=await d()({path:`/wp/v2/${e}`,method:"POST",data:l});return i(t),r(!1),t}catch(e){n(e)}finally{r(!1)}}}})(),{step:l,incrementStep:i,decrementStep:s,setAttributes:u}=y(),c=(0,o.useCallback)((async()=>{const t=await e(),{id:r}=t;u({galleryId:r})}),[e,u]);return(0,n.createElement)(b.Placeholder,{icon:(0,n.createElement)(f.BlockIcon,{icon:(0,n.createElement)(a,null)}),label:(0,h.__)("Modula Gallery Block","random-image"),instructions:(0,h.__)("Create a new gallery or choose from an existing one.","modula-best-grid-gallery")},(0,n.createElement)(b.Button,{isBusy:t,variant:"primary",label:(0,h.__)("Add New Gallery","modula-best-grid-gallery"),onClick:c},(0,h.__)("Add New Gallery","modula-best-grid-gallery")),(0,n.createElement)(b.Button,{onClick:i,label:(0,h.__)("Insert Existing Gallery","modula-best-grid-gallery")},(0,h.__)("Insert Existing Gallery","modula-best-grid-gallery")))},pe=({id:e,src:t})=>{const{attributes:r}=y();return(0,n.createElement)("span",{id:e,className:"GnILeVOQV13weqBNNBPn",style:{backgroundImage:`url(${t})`,"--columns":r.galleryColumns}})},fe={galleryContainer:"jM3AhXxJkvrWgUNU9Ofs"},be=()=>{const{attributes:e}=y(),{data:t,error:r,isLoading:l}=se(`/wp/v2/modula-gallery/${e.galleryId}`,ce),a=(0,o.useMemo)((()=>l||r||!t?[]:Array.isArray(t.modulaImages)?t.modulaImages.map((e=>({id:e.id,src:e.thumbnail}))):[]),[t,r,l]);return l?(0,n.createElement)(b.Spinner,null):(0,n.createElement)("div",{className:fe.galleryContainer},a.map((t=>(0,n.createElement)(pe,{className:fe.galleryItem,key:`${e.galleryId}-${t.id}`,id:t.id,src:t.src}))))},ye=(0,o.forwardRef)((({id:e,src:t,orientation:r,...l},a)=>(0,n.createElement)("div",{ref:a,className:"n1jAlHtO5QzyJKGTfnkD",style:{...l.style,width:"calc(25% - 10px)",height:"landscape"===r?"200px":"400px"}},(0,n.createElement)("div",{className:"DLS4SKjAea3yZImHL0fV",style:{backgroundImage:`url(${t})`}}))));var he=r(893),_e=Object.defineProperty,ve=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,ke=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Oe=(e,t)=>{for(var r in t||(t={}))Se.call(t,r)&&ke(e,r,t[r]);if(we)for(var r of we(t))Ce.call(t,r)&&ke(e,r,t[r]);return e},xe=(e,t)=>ve(e,Ee(t)),Pe=(e,t)=>t.filter(e),Re=(e,t)=>e.top===t.top?e.left<t.left?-1:1:e.top<t.top?-1:1;function Te({stone:e,availableSpots:t,containerSize:r}){let l=(({availableSpots:e,stone:t})=>function(e,t){for(let r=0,l=t.length;r<l;r++){let l=t[r];if(e(l))return l}return null}((e=>((e,t)=>{let r=e.right-e.left>=t.width;if(!e.bottom)return r;let l=e.bottom-e.top>=t.height;return r&&l})(e,t)),e))({availableSpots:t,stone:e}),n={left:l.left,top:l.top},a=(({availableSpots:e,optimalSpot:t,containerSize:r,stone:l})=>{let n={right:r,top:t.top+l.height,left:t.left};t.bottom&&(n.bottom=t.bottom);for(let t=0,r=e.length;t<r;t+=1){let r=e[t];if(n.left<r.left&&n.top<r.top){n.right=r.left;break}}return n})({optimalSpot:l,availableSpots:t.filter((e=>e!==l)),stone:e,containerSize:r}),o=[...t,a],i=(({spots:e,position:t,optimalSpot:r,stone:l})=>e.map(((e,n,a)=>{if(e===r)return(({stone:e,position:t,spotsList:r,optimalSpot:l})=>{let n=Oe({},l);return n.left=t.left+e.width,(e=>e.right-e.left<5||e.bottom&&e.bottom-e.top<5)(n)||(({spotsList:e,usedSpot:t})=>e.some((e=>e!==t&&t.left===e.left)))({usedSpot:n,spotsList:r})?null:n})({stone:l,position:t,optimalSpot:r,spotsList:a});let o=(({position:e,spot:t,stone:r})=>{if(e.left>t.left&&t.right>=e.left&&e.top+r.height>t.top){if(t.bottom&&t.bottom<e.top)return t;let r=Oe({},t);return r.right=e.left,r}return null})({position:t,spot:e,stone:l});if(o)return o;let i=(({position:e,stone:t,spot:r})=>{if(e.left+t.width>r.left&&e.top>=r.top){if(r.bottom&&r.bottom<e.top||r.right<e.left)return r;let t=Oe({},r);return t.bottom=e.top,t}return null})({position:t,stone:l,spot:e});return i||e})))({spots:o,position:n,optimalSpot:l,stone:e});return o=[...Pe(Boolean,i)],o=(e=>((e,t)=>[...t].sort(e))(Re,e))(o),{position:n,availableSpots:o}}var Ie=e=>({fade:`${e}ms opacity ease`,fadeMove:`\n    ${e}ms opacity ease,\n    ${e}ms top ease,\n    ${e}ms left ease\n  `,move:`\n    ${e}ms top ease,\n    ${e}ms left ease\n  `}),Le=({style:e,position:t,transition:r,transitionDuration:l})=>Oe(Oe(xe(Oe({},e),{position:"absolute"}),(e=>e?xe(Oe({},e),{opacity:1}):{opacity:0,top:0,left:0})(t)),(({transition:e,transitionDuration:t})=>e?{transition:Ie(t)[e]}:null)({transition:r,transitionDuration:l})),ze=e=>{var t=e,{children:r,style:l,transition:a=!1,transitionDuration:o=500,transitionStep:i=50}=t,s=((e,t)=>{var r={};for(var l in e)Se.call(e,l)&&t.indexOf(l)<0&&(r[l]=e[l]);if(null!=e&&we)for(var l of we(e))t.indexOf(l)<0&&Ce.call(e,l)&&(r[l]=e[l]);return r})(t,["children","style","transition","transitionDuration","transitionStep"]);let u=(0,n.useRef)([]),c=(0,n.useRef)(null),d=(()=>{let[e,t]=(0,n.useState)(),r=(0,n.useRef)(function(e,t,r){let l;return function(...t){l&&clearTimeout(l),l=setTimeout((function(){l=null,e.apply(null,t)}),300)}}(t));return(0,n.useEffect)((()=>{let e=()=>{r.current(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),e})(),g=(e=>{let[t,r]=(0,n.useState)(null);return(0,n.useEffect)((()=>{let t=new ResizeObserver((e=>{for(let t of e)r(t.contentRect.width)}));return e.current&&t.observe(e.current),()=>{t.disconnect()}}),[e]),t})(c),{positions:m,containerHeight:p}=(({boxesRefs:e,wrapperRef:t,children:r,windowWidth:l,wrapperWidth:a})=>{let[{positions:o,containerHeight:i,stones:s,availableSpots:u},c]=(0,n.useState)({positions:[],containerHeight:null,stones:[],availableSpots:[]});return(0,n.useEffect)((()=>{var r,l;let n=(e=>e.reduce(((e,t)=>{if(!t)return e;let r=t.getBoundingClientRect();return e.push({width:r.width,height:r.height}),e}),[]))(e.current),a=null!=(l=null==(r=t.current)?void 0:r.offsetWidth)?l:0;if(null===a)return;let o=(({stones:e,containerSize:t})=>{if(!e.length)return{positions:[],containerHeight:0,availableSpots:[]};let r=0,l=[],n=[{top:0,left:0,right:t}];for(let a of e){let e=Te({availableSpots:n,stone:a,containerSize:t}),o=e.position.top+a.height;r<o&&(r=o),l.push(e.position),n=e.availableSpots}return{availableSpots:n,positions:l,containerHeight:r}})({stones:n,containerSize:a});c(xe(Oe({},o),{stones:n}))}),[r,e,t,l,a]),{positions:o,containerHeight:i,stones:s,availableSpots:u}})({boxesRefs:u,wrapperRef:c,children:r,windowWidth:d,wrapperWidth:g}),f=Oe({minHeight:null!=p?p:0,position:"relative"},l);return(0,he.jsx)("div",xe(Oe({ref:c,style:f},s),{children:n.Children.map(r,((e,t)=>{if("object"!=typeof e||!e||!("type"in e))return e;let r={style:Le({style:e.props.style,position:m[t],transition:a,transitionDuration:o}),ref:e=>u.current[t]=e};return(0,n.cloneElement)(e,Oe(Oe({},e.props),r))}))}))};const Ne=()=>{const{attributes:e}=y(),{data:t,error:r,isLoading:l}=se(`/wp/v2/modula-gallery/${e.galleryId}`,ce),a=(0,o.useMemo)((()=>l||r||!t?[]:Array.isArray(t.modulaImages)?t.modulaImages.map((e=>({id:e.id,src:e.thumbnail,orientation:e.orientation}))):[]),[t,r,l]);return l?(0,n.createElement)(b.Spinner,null):(0,n.createElement)("div",{className:"cgt92h_Pw_KUIHq8sMrO"},(0,n.createElement)(ze,null,a.map(((e,t)=>(0,n.createElement)(ye,{key:t,index:t,id:e.id,orientation:e.orientation,src:e.src})))))},Be=()=>{const{attributes:e}=y(),{galleryType:t}=e;return"creative"===t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(b.__experimentalText,null,"Rendering creative gallery: ",e.galleryId),(0,n.createElement)(be,null)):"masonry"===t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(b.__experimentalText,null,"Rendering masonry gallery: ",e.galleryId),(0,n.createElement)(Ne,null)):"custom-grid"===t?(0,n.createElement)(n.Fragment,null,(0,n.createElement)(b.__experimentalText,null,"Rendering custom grid: ",e.galleryId),(0,n.createElement)(be,null)):(0,n.createElement)(b.__experimentalText,null,"Unknown gallery type: ",t)},Fe=()=>{const{attributes:e}=y(),t=(0,f.useBlockProps)({className:"modula-splash-container"});return(0,n.createElement)("div",{...t},e.galleryId>0?(0,n.createElement)(Be,null):(0,n.createElement)(me,null))},Me=JSON.parse('{"u2":"modula/gallery"}');(0,l.registerBlockType)(Me.u2,{edit:function({attributes:e,setAttributes:t}){return(0,n.createElement)(m,{initialValues:{blockBackground:"#000000"},attributes:e,setAttributes:t},(0,n.createElement)(Fe,null),(0,n.createElement)(ge,null))},icon:a(),deprecated:[{attributes:{id:{type:"number",default:0},images:{type:"array",default:[]},status:{type:"string",default:"ready"},galleryId:{type:"number",default:0},defaultSettings:{type:"object",default:[]},galleryType:{type:"string",default:"none"},currentGallery:{type:"object",default:{}},currentSelectize:{type:"array",default:[]}},save:()=>null}]})},251:(e,t,r)=>{var l=r(196),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),o=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,r){var l,s={},u=null,c=null;for(l in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,l)&&!i.hasOwnProperty(l)&&(s[l]=t[l]);if(e&&e.defaultProps)for(l in t=e.defaultProps)void 0===s[l]&&(s[l]=t[l]);return{$$typeof:n,type:e,key:u,ref:c,props:s,_owner:o.current}}},893:(e,t,r)=>{e.exports=r(251)},250:(e,t,r)=>{var l=r(196),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=l.useState,o=l.useEffect,i=l.useLayoutEffect,s=l.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!n(e,r)}catch(e){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),l=a({inst:{value:r,getSnapshot:t}}),n=l[0].inst,c=l[1];return i((function(){n.value=r,n.getSnapshot=t,u(n)&&c({inst:n})}),[e,r,t]),o((function(){return u(n)&&c({inst:n}),e((function(){u(n)&&c({inst:n})}))}),[e]),s(r),r};t.useSyncExternalStore=void 0!==l.useSyncExternalStore?l.useSyncExternalStore:c},688:(e,t,r)=>{e.exports=r(250)},196:e=>{e.exports=window.React}},r={};function l(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e](a,a.exports,l),a.exports}l.m=t,e=[],l.O=(t,r,n,a)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,n,a]=e[c],i=!0,s=0;s<r.length;s++)(!1&a||o>=a)&&Object.keys(l.O).every((e=>l.O[e](r[s])))?r.splice(s--,1):(i=!1,a<o&&(o=a));if(i){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,n,a]},l.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return l.d(t,{a:t}),t},l.d=(e,t)=>{for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={571:0,963:0};l.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[o,i,s]=r,u=0;if(o.some((t=>0!==e[t]))){for(n in i)l.o(i,n)&&(l.m[n]=i[n]);if(s)var c=s(l)}for(t&&t(r);u<o.length;u++)a=o[u],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},r=globalThis.webpackChunkmodula_best_grid_gallery=globalThis.webpackChunkmodula_best_grid_gallery||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var n=l.O(void 0,[963],(()=>l(219)));n=l.O(n)})();